{% extends 'social/layout.html' %}
{% load static %}


{% block head %}
    <script src="{% static 'social/feed.js' %}" defer></script>
{% endblock %}

{% block body %}
    <div class="main">
        <h1>Posts</h1>
        {% for post in posts %}
            <div class="post">
                <div class="header">
                    <div class="info">
                        <img src="{{ post.user.profile_pic.url }}" alt="pfp">
                        <div class="name-username">
                            <span class="name">{{post.user.full_name}}</span>
                            <span class="username">@{{post.user.username}}</span>
                        </div>
                    </div>
                </div>
                <div class="content">
                    {{ post.content }}
                </div>
                <div class="footer">
                    <div class="like">
                        <button onclick="handleLike(this)" class="like-button" data-post-id="{{post.id}}">
                            {% if post.id in likes%}
                            <i class="fa-solid fa-heart"></i>
                            {% else %}
                            <i class="fa-regular fa-heart"></i>
                            {% endif %}

                        </button>
                        <span class="like-count">{{ post.likes.count }}</span>
                    </div>
                    <div class="comment">
                        <button class="comment-button" data-post-id="{{post.id}}" onclick="handleComment(this)"><i class="fa-regular fa-comment"></i></button>
                        <span class="comment-count">{{ post.comments.count }}</span>
                    </div>
                </div>
            </div>
        {% empty %}
            <p>No posts in database!</p>
        {% endfor %}
    </div>
{% endblock %}  